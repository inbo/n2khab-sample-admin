# Query INBOVEG


```{r connection and query}

connection_inboveg <- connect_inbo_dbase(database_name = "D0010_00_Cydonia")

classif_mhq <- bind_rows(
    inboveg_classification(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland", collect = TRUE),
    inboveg_classification(connection = connection_inboveg, survey_name = "N2000meetnet_Moerassen", collect = TRUE),
    inboveg_classification(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland_BHM", collect = TRUE),
    inboveg_classification(connection = connection_inboveg, survey_name = "N2000meetnet_Moeras_BHM", collect = TRUE)
) %>%
    select(recording_givid = RecordingGivid, survery = Name, classif = Classif, classif_type = ActionGroup, classif_key = ListName, classif_description = LocalClassification, cover = Cover)

header_mhq <- bind_rows(
    inboveg_header(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland", collect = TRUE),
    inboveg_header(connection = connection_inboveg, survey_name = "N2000meetnet_Moerassen", collect = TRUE),
    inboveg_header(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland_BHM", collect = TRUE),
    inboveg_header(connection = connection_inboveg, survey_name = "N2000meetnet_Moeras_BHM", collect = TRUE)) %>%
    select(recording_givid = RecordingGivid, survery = Name, user_reference = UserReference, area = Area, vague_date_begin = VagueDateBegin, vague_date_end = VagueDateEnd)

recordings_mhq <- bind_rows(
    inboveg_recordings(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland", collect = TRUE),
    inboveg_recordings(connection = connection_inboveg, survey_name = "N2000meetnet_Moerassen", collect = TRUE),
    inboveg_recordings(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland_BHM", collect = TRUE),
    inboveg_recordings(connection = connection_inboveg, survey_name = "N2000meetnet_Moeras_BHM", collect = TRUE))

qualifiers_mhq <- bind_rows(inboveg_qualifiers(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland", qualifier_type = "MQ"),
                            inboveg_qualifiers(connection = connection_inboveg, survey_name = "N2000meetnet_Moerassen", qualifier_type = "MQ"),
                            inboveg_qualifiers(connection = connection_inboveg, survey_name = "N2000meetnet_Grasland_BHM", qualifier_type = "MQ"),
                            inboveg_qualifiers(connection = connection_inboveg, survey_name = "N2000meetnet_Moeras_BHM", qualifier_type = "MQ"))

setwd("../../n2khab_mhq_data/original/field-data/moeras-grasland")
dir.create(as.character(str_c("inboveg", as.character(Sys.Date(),"%Y-%m-%d"), sep = "_")))
setwd(str_c("inboveg_", as.character(Sys.Date(),"%Y-%m-%d"), "/"))

write.csv2(classif_mhq, "classif_mhq.csv", row.names = FALSE)
write.csv2(header_mhq, "header_mhq.csv", row.names = FALSE)
write.csv2(qualifiers_mhq, "qualifiers_mhq.csv", row.names = FALSE)
write.csv2(recordings_mhq, "recordings_mhq.csv", row.names = FALSE)

```

